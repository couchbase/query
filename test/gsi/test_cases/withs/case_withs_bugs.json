[
    {
	"testcase": "MB-51753",
        "explain": {
            "disabled": false,
            "results": [
                {
                    "present": true
                }
            ],
            "statement": "SELECT true AS present FROM $explan AS p WHERE ANY v WITHIN p.`plan`.`~children` SATISFIES v.`#operator` = \"InitialProject\" AND CONTAINS(v.`result_terms`[0].`expr`, \"correlated \") END"
        },
        "statements":"SELECT (WITH a AS (s.a11) SELECT RAW c1 FROM a AS c1) AS arr, s.test_id FROM shellTest s WHERE s.c11 IN [1, 2] AND type = \"left\"",
        "results": [
            {
                "arr": [
                    1,
                    2,
                    3,
                    4
                ],
                "test_id": "withs"
            },
            {
                "arr": [
                    3,
                    3,
                    5,
                    10
                ],
                "test_id": "withs"
            }
        ]
    },
    {
	"testcase": "MB-51753 part2, detect correlation reference for (non-)covering",
        "explain": {
            "disabled": false,
            "results": [
                {
                    "present": true
                }
            ],
            "statement": "SELECT true AS present FROM $explan AS p WHERE ANY v WITHIN p.`plan`.`~children` SATISFIES v.`#operator` = \"InitialProject\" AND CONTAINS(v.`result_terms`[0].`expr`, \"correlated \") END"
        },
        "statements":"SELECT (WITH a AS (s.a11) SELECT RAW c1 FROM a AS c1) AS arr FROM shellTest s WHERE s.c11 IN [1, 2] AND type = \"left\"",
        "results": [
            {
                "arr": [
                    1,
                    2,
                    3,
                    4
                ]
            },
            {
                "arr": [
                    3,
                    3,
                    5,
                    10
                ]
            }
        ]
    },
    {
	"testcase": "MB-50881",
        "statements":"WITH s as ([{\"a\":1}, {\"a\":2}]) SELECT s1.a FROM s AS s1 WHERE s1.a = 1 UNION ALL SELECT s1.a + 10 AS a11 FROM s AS s1 WHERE s1.a = 2",
        "results": [
            {
                "a11": 12
            },
            {
                "a": 1
            }
        ]
    },
    {
	"testcase": "MB-52200",
        "statements":"WITH arrs AS ([1,2,3,4]) SELECT meta().id, FIRST v FOR v IN arrs END AS elem FROM shellTest s WHERE s.c11 = 1 AND type = \"left\"",
        "results": [
            {
                "elem": 1,
                "id": "test11_withs"
            }
        ]
    },
    {
	"testcase": "MB-44279 Part 1",
        "statements":"WITH a1 AS ([{\"EffectiveDate\": \"2021-01-27\"}, {\"EffectiveDate\": \"2021-01-28\"}]) SELECT a1, r FROM a1 UNNEST (SELECT d.EffectiveDate FROM a1 AS d) AS r",
	"error": "Duplicate FROM expression WITH alias a1 (near line 1, column 140)"
    },
    {
	"testcase": "MB-44279 Part 2",
        "statements":"WITH a1 AS ([{\"EffectiveDate\": \"2021-01-27\"}, {\"EffectiveDate\": \"2021-01-28\"}]) SELECT l, r FROM a1 AS l UNNEST (SELECT d.EffectiveDate FROM a1 AS d) AS r",
        "results": [
            {
                "l": {
                    "EffectiveDate": "2021-01-27"
                },
                "r": {
                    "EffectiveDate": "2021-01-27"
                }
            },
            {
                "l": {
                    "EffectiveDate": "2021-01-27"
                },
                "r": {
                    "EffectiveDate": "2021-01-28"
                }
            },
            {
                "l": {
                    "EffectiveDate": "2021-01-28"
                },
                "r": {
                    "EffectiveDate": "2021-01-27"
                }
            },
            {
                "l": {
                    "EffectiveDate": "2021-01-28"
                },
                "r": {
                    "EffectiveDate": "2021-01-28"
                }
            }
        ]
    },
    {
	"testcase": "MB-44279 Part 3",
        "explain": {
            "disabled": false,
            "results": [
                {
                    "present": true
                }
            ],
            "statement": "SELECT true AS present FROM $explan AS p WHERE ANY v WITHIN p.`plan`.`~child`.`~children` SATISFIES v.`#operator` LIKE 'IndexScan%' AND v.`spans`[0].`range`[0].dynamic_in = true END"
        },
        "statements":"WITH cte AS ([1,2,3,4,5,6]) SELECT s.c11 FROM shellTest s WHERE s.c11 IN cte AND type = \"left\"",
        "results": [
            {
                "c11": 1
            },
            {
                "c11": 2
            },
            {
                "c11": 3
            },
            {
                "c11": 4
            }
        ]
    },
    {
	"testcase": "MB-55835",
        "explain": {
            "disabled": false,
            "results": [
                {
                    "present": true
                }
            ],
            "statement": "SELECT true AS present FROM $explan AS p WHERE ANY v WITHIN p.`plan`.`~child`.`~children` SATISFIES v.`#operator` LIKE 'IndexScan%' AND v.`as` = 's' AND v.`covers` IS NOT MISSING END"
        },
        "statements":"WITH cte AS ([{\"c1\": 1}, {\"c1\":2}]) SELECT s.c12, cte1.c1 FROM shellTest s, cte cte1 WHERE s.c11 = cte1.c1 AND s.type = \"left\"",
        "results": [
            {
                "c12": 10,
                "c1": 1
            },
            {
                "c12": 20,
                "c1": 2
            }
        ]
    }
]

